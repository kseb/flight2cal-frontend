<div style="width: 100%; min-width: 300px; max-width: 600px; margin-bottom: 20px;">
  <!-- Departure Airport Picker -->
  <div style="width: 100%; margin-bottom: 20px;">
    <app-airportpicker [title]="'Departure airport'" #departureAirport></app-airportpicker>
  </div>

  <!-- Arrival Airport Picker -->
  <div style="width: 100%;">
    <app-airportpicker [title]="'Arrival airport'" #arrivalAirport></app-airportpicker>
  </div>
</div>

<div style="margin-bottom: 20px; width: 100%; max-width: 600px;">
  <mat-form-field class="mat-mdc-form-field-flex" appearance="fill" style="width: 100%;">
    <mat-label>Choose date of flight</mat-label>
    <input matInput [matDatepicker]="picker" #date (focus)="picker.open()" required>
    <mat-hint>MM/DD/YYYY</mat-hint>
    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
  </mat-form-field>
</div>

<div style="text-align: center; margin-bottom: 20px;">
  <button style="width: 100%" mat-raised-button color="accent"
          (click)="submit(date.value, departureAirport.airport.value, arrivalAirport.airport.value)">
    Show flights
  </button>
</div>

<mat-card *ngFor="let flight of flights" appearance="outlined" style="margin: 20px 0; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
  <mat-card-header>
    <mat-card-title>{{ flight.airline_name }}</mat-card-title>
    <mat-card-subtitle>{{ flight.departure_airport_name }} - {{ flight.arrival_airport_name }}</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <p>Departure: {{ flight.departure | date:'short' }}</p>
    <p>Arrival: {{ flight.arrival | date:'short' }}</p>
  </mat-card-content>

  <mat-card-actions align="end">
    <add-to-calendar-button
      [attr.name]="'Flight from ' + flight.departure_city + ' to ' + flight.arrival_city"
      [attr.startDate]="flight.departure | date:'yyyy-MM-dd'"
      [attr.startTime]="flight.departure | date:'HH:mm'"
      [attr.endTime]="flight.arrival | date:'HH:mm'"
      [attr.location]="flight.departure_airport_name"
      [attr.description]="'Flight from <it>' + flight.departure_airport_name + '</it> to <it>' +
        flight.arrival_airport_name + '</it>:<br>Departure: ' + (flight.departure | date:'short') + '<br>Arrival: ' +
        (flight.arrival | date:'short')"
      options="'Google','iCal'"
      buttonsList
      hideTextLabelButton
      buttonStyle="round"
      lightMode="bodyScheme"
    ></add-to-calendar-button>
  </mat-card-actions>
</mat-card>
